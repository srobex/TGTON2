# –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ HyperSniper –Ω–∞ Debian

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ HyperSniper:
- **HyperSniper Indexer** (Go) ‚Äî —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –±–ª–æ–∫—á–µ–π–Ω TON
- **HyperSniper Bot** (Python) ‚Äî Telegram –±–æ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Redis** ‚Äî –æ–±—â–∏–π –∫—ç—à
- **PostgreSQL** ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–Ω–¥–µ–∫—Å–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

- Debian 11+ / Ubuntu 22.04+
- 2+ vCPU
- 4+ GB RAM
- 20+ GB SSD
- –°—Ç–∞–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (–Ω–∏–∑–∫–∏–π –ø–∏–Ω–≥ –¥–æ TON liteserver)

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo apt update && sudo apt upgrade -y

# –ë–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
sudo apt install -y curl git wget nano htop

# Redis
sudo apt install -y redis-server
sudo systemctl enable redis-server
sudo systemctl start redis-server

# Python 3.12
sudo apt install -y python3.12 python3.12-venv python3-pip

# Go 1.23
wget https://go.dev/dl/go1.23.4.linux-amd64.tar.gz
sudo rm -rf /usr/local/go
sudo tar -C /usr/local -xzf go1.23.4.linux-amd64.tar.gz
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
source ~/.bashrc
go version  # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å go1.23.4
```

## –®–∞–≥ 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

```bash
cd ~

# –ò–Ω–¥–µ–∫—Å–µ—Ä
git clone https://github.com/srobex/TGTON2Index.git

# –ë–æ—Ç
git clone https://github.com/srobex/TGTON2.git
```

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ (TGTON2)

```bash
cd ~/TGTON2

# –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.12 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
nano config/runtime.env
```

**–í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config/runtime.env`:**

```env
# Telegram (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
TELEGRAM__TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
TELEGRAM__ADMINS=[–≤–∞—à_telegram_id]

# TON
TON__NETWORK=mainnet
TON__USE_WEBSOCKET=false  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–Ω–¥–µ–∫—Å–µ—Ä!

# Redis (–æ–±—â–∏–π —Å –∏–Ω–¥–µ–∫—Å–µ—Ä–æ–º)
CACHE__BACKEND=redis
CACHE__REDIS_DSN=redis://localhost:6379/0

# –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
REFERRAL__OMNISTON_PAYLOAD=–≤–∞—à_payload

# JWT
SECURITY__JWT_SECRET=—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ_32_—Å–∏–º–≤–æ–ª–∞
```

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
python -m bot.scripts.init_db
```

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω–¥–µ–∫—Å–µ—Ä–∞ (TGTON2Index)

```bash
cd ~/TGTON2Index

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
nano config.yaml
```

**–í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.yaml`:**

```yaml
app:
  network: "mainnet"
  catchup_hours: 0  # –¢–æ–ª—å–∫–æ realtime

redis:
  addr: "localhost:6379"

notifier:
  tg_bot_token: "–≤–∞—à_—Ç–æ–∫–µ–Ω"  # –ú–æ–∂–Ω–æ —Ç–æ—Ç –∂–µ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π
  tg_chat_id: "id_–∫–∞–Ω–∞–ª–∞_–¥–ª—è_–æ–ø–æ–≤–µ—â–µ–Ω–∏–π"
  webhook_url: "http://localhost:8000/api/indexer/event"
```

## –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–æ–≤

### –°–µ—Ä–≤–∏—Å –±–æ—Ç–∞

```bash
sudo nano /etc/systemd/system/hypersniper-bot.service
```

```ini
[Unit]
Description=HyperSniper Telegram Bot
After=network.target redis.service

[Service]
Type=simple
User=root
WorkingDirectory=/root/TGTON2
Environment=PATH=/root/TGTON2/.venv/bin
ExecStart=/root/TGTON2/.venv/bin/python -m bot.main
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

### –°–µ—Ä–≤–∏—Å FastAPI

```bash
sudo nano /etc/systemd/system/hypersniper-api.service
```

```ini
[Unit]
Description=HyperSniper FastAPI
After=network.target redis.service

[Service]
Type=simple
User=root
WorkingDirectory=/root/TGTON2
Environment=PATH=/root/TGTON2/.venv/bin
ExecStart=/root/TGTON2/.venv/bin/uvicorn bot.web.app:app --host 0.0.0.0 --port 8000
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

### –°–µ—Ä–≤–∏—Å –∏–Ω–¥–µ–∫—Å–µ—Ä–∞

```bash
sudo nano /etc/systemd/system/hypersniper-indexer.service
```

```ini
[Unit]
Description=HyperSniper Indexer
After=network.target redis.service hypersniper-api.service

[Service]
Type=simple
User=root
WorkingDirectory=/root/TGTON2Index
ExecStart=/usr/local/go/bin/go run ./cmd/indexer --network=mainnet
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

## –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ systemd
sudo systemctl daemon-reload

# –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
sudo systemctl enable hypersniper-bot hypersniper-api hypersniper-indexer

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
sudo systemctl start hypersniper-bot
sudo systemctl start hypersniper-api

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥ –ø–æ–∫–∞ FastAPI –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
sleep 5

# –ó–∞–ø—É—Å–∫ –∏–Ω–¥–µ–∫—Å–µ—Ä–∞
sudo systemctl start hypersniper-indexer

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
sudo systemctl status hypersniper-bot
sudo systemctl status hypersniper-api
sudo systemctl status hypersniper-indexer
```

## –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –í—Å–µ —Ç—Ä–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å active (running)
sudo systemctl status hypersniper-bot hypersniper-api hypersniper-indexer
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ë–æ—Ç
sudo journalctl -u hypersniper-bot -f

# API
sudo journalctl -u hypersniper-api -f

# –ò–Ω–¥–µ–∫—Å–µ—Ä
sudo journalctl -u hypersniper-indexer -f
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ endpoint

```bash
curl http://localhost:8000/api/indexer/health
# {"status":"ok","service":"hypersniper-bot","ready_for_indexer":true}
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram

–ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É `/start` ‚Äî –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å.

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ö–æ–≥–¥–∞ –∏–Ω–¥–µ–∫—Å–µ—Ä –Ω–∞–π–¥—ë—Ç –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω:
1. –í –ª–æ–≥–∞—Ö –∏–Ω–¥–µ–∫—Å–µ—Ä–∞: `üöÄ –ù–ê–ô–î–ï–ù JETTON MINTER`
2. –í –ª–æ–≥–∞—Ö API: `üì• –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ –æ—Ç –∏–Ω–¥–µ–∫—Å–µ—Ä–∞`
3. –í –ª–æ–≥–∞—Ö –±–æ—Ç–∞: –æ–±—Ä–∞–±–æ—Ç–∫–∞ GemScanner
4. –í Telegram –∫–∞–Ω–∞–ª–µ: —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–∫–µ–Ω–µ

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ
sudo systemctl restart hypersniper-bot hypersniper-api hypersniper-indexer

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ–≥–æ
sudo systemctl stop hypersniper-indexer hypersniper-api hypersniper-bot

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
cd ~/TGTON2 && git pull
cd ~/TGTON2Index && git pull
sudo systemctl restart hypersniper-bot hypersniper-api hypersniper-indexer

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
htop

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
redis-cli INFO | grep used_memory_human
redis-cli KEYS "*minter*"

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ Redis (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
redis-cli FLUSHDB
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ò–Ω–¥–µ–∫—Å–µ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ TON

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
journalctl -u hypersniper-indexer -f

# –í–æ–∑–º–æ–∂–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω liteserver, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π
# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–≤–æ–π liteserver
```

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω
curl http://localhost:8000/api/indexer/health

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
sudo lsof -i :8000
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
journalctl -u hypersniper-bot -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
sudo systemctl restart hypersniper-bot
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

1. **Prometheus + Grafana** –¥–ª—è –º–µ—Ç—Ä–∏–∫
2. **AlertManager** –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–∞–¥–µ–Ω–∏–∏
3. **Logrotate** –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
4. **Backup** –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl stop hypersniper-indexer hypersniper-api hypersniper-bot

# 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
cd ~/TGTON2 && git pull
cd ~/TGTON2Index && git pull

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±–æ—Ç–∞
cd ~/TGTON2
source .venv/bin/activate
pip install -r requirements.txt

# 4. –ó–∞–ø—É—Å–∫
sudo systemctl start hypersniper-bot hypersniper-api
sleep 5
sudo systemctl start hypersniper-indexer
```

